<script>
  function find(source, pattern) {
    const next = generateNext(pattern)
    console.log(next);
    let j = 0
    for (let i = 0; i < source.length; i++) {
      if (source[i] === pattern[j]) {
        j++
      } else {
        j = next[j - 1] || 0
        if (source[i] === pattern[j]) j++
      }
      if (j === pattern.length) return true
    }

    return false
  }

  function generateNext(pattern) {
    let j = 1;
    const next = Array(pattern.length).fill(0)
    for (let i = 0; i < pattern.length; i++) {
      if (pattern[i] === pattern[j]) {
        j++
        next[i] = j
      } else {
        j = 0
      }
    }
    return next
  }
</script>