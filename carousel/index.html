<head>
  <style>
    #container {
      width: 500px;
      height: 300px;
      white-space: nowrap;
      overflow: hidden;
      outline: 1px solid blue;
      margin: auto;
      /* zoom: .5; */
    }

    #container>img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: inline-block;
    }
  </style>
</head>

<body>
  <div id="container"></div>
  <script>
    const imgList = [
      'https://tse1-mm.cn.bing.net/th/id/OIP.z2Q5yDKbQakzgCcUrKBJkAHaJz?pid=Api&rs=1',
      'https://tse4-mm.cn.bing.net/th/id/OIP.ZFVnyvQrDwUFrKd4a55VFAHaJ4?pid=Api&rs=1',
      'https://tse4-mm.cn.bing.net/th/id/OIP.2Fxq5vDKSaEYuTXzKuw_gwHaJ4?pid=Api&rs=1',
      'https://tse1-mm.cn.bing.net/th/id/OIP.diD6kXAYPVQN1I3YviPYJgHaFj?pid=Api&rs=1',
      'https://ranking.xgoo.jp/tool/images/column/2020/01/0128_9.jpg'
    ]
    const container = document.getElementById('container')
    let position = 0

    imgList.forEach(src => {
      const img = document.createElement('img')
      img.src = src
      img.draggable = false
      container.append(img)

      img.addEventListener('mousedown', e => {
        const width = img.getBoundingClientRect().width
        const sX = e.clientX

        let lastPosition = (position - 1 + container.children.length) % container.children.length
        let nextPosition = (position + 1) % container.children.length

        let last = container.children[lastPosition]
        let current = container.children[position]
        let next = container.children[nextPosition]

        last.style.transition = `none`
        current.style.transition = `none`
        next.style.transition = `none`

        const move = e => {
          last.style.transform = `translateX(${-width - width * lastPosition - (sX - e.clientX)}px)`
          current.style.transform = `translateX(${-width * position - (sX - e.clientX)}px)`
          next.style.transform = `translateX(${width - width * nextPosition - (sX - e.clientX)}px)`
        }
        const up = e => {
          document.removeEventListener('mousemove', move)
          document.removeEventListener('mouseup', up)

          let offset = 0
          if (sX - e.clientX > 250) offset = -1
          else if (sX - e.clientX < -250) offset = 1

          last.style.transition = `ease .5s`
          current.style.transition = `ease .5s`
          next.style.transition = `ease .5s`

          position = (position - offset + container.children.length) % container.children.length
          lastPosition = (position - 1 + container.children.length) % container.children.length
          nextPosition = (position + 1) % container.children.length

          last = container.children[lastPosition]
          current = container.children[position]
          next = container.children[nextPosition]

          last.style.transform = `translateX(${-width - width * lastPosition}px)`
          current.style.transform = `translateX(${-width * position}px)`
          next.style.transform = `translateX(${width - width * nextPosition}px)`


        }

        document.addEventListener('mousemove', move)
        document.addEventListener('mouseup', up)
      })
    })


    function run() {
      const nextPic = () => {
        const nextPosition = (position + 1) % container.children.length
        const current = container.children[position]
        const next = container.children[nextPosition]

        current.style.transition = `none`
        next.style.transition = `none`
        current.style.transform = `translateX(${- 100 * position}%)`;
        next.style.transform = `translateX(${100 - 100 * nextPosition}%)`;

        setTimeout(() => {
          current.style.transition = `ease .5s`
          next.style.transition = `ease .5s`
          current.style.transform = `translateX(${-100 - 100 * position}%)`;
          next.style.transform = `translateX(${-100 * nextPosition}%)`;
          position = nextPosition
        }, 16);

        run()
      }

      setTimeout(nextPic, 1000);
    }

    // run()

  </script>
</body>